<!DOCTYPE html>
<html>

<head>
  <title>S P A C E</title>
  <link href="https://fonts.googleapis.com/css?family=Arimo" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Anonymous+Pro:400,700&amp;subset=cyrillic" rel="stylesheet">
  <style type="text/css">
    * {
      transition: all 0.5s;
    }

    body {
      margin: 0;
      box-sizing: border-box;
      height: 100vh;
      transition: all 0.5s ease;
      perspective: 1000px;
      background: #cccccc;
      padding-top: 2vh;
      padding-bottom: 2vh;
      padding-left: 2vw;
      padding-right: 2vw;
    }

    .editor-container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    }

    textarea {
      margin: 0;
      padding: 6px;
      border: none;
      width: 25%;
      height: 89vh;
      max-height: 89vh;
      outline: none;
      transition: all 0.5s ease;
      background: #1e1e1e;
      color: #b5cea8;
      font-family: 'Anonymous Pro', monospace;
      font-weight: bold;
      font-size: 14px;
      border-radius: 4px;
    }

    #markup-content {
      transform: rotateY(8deg);
    }

    #style-content {
      transform: rotateY(-8deg);
    }

    #html {
      flex-grow: 1;
      height: 88vh;
      max-height: 88vh;
      border: solid #2d2d30 2px;
      background: white;
      max-width: 45%;
      margin: 0px 8px;
      border-radius: 4px;
      padding: 0px;
      overflow-y: hidden;
    }
    #body {
      width: 100%;
      height: 100%;
      overflow-y: auto;
    }
  </style>
  <style id="css" type="text/css"></style>
  <script id="script" type="text/javascript"></script>
</head>

<body>
  <div class="editor-container">
    <textarea disabled id="markup-content"></textarea>
    <div id="html">
      <div id="body"></div>
    </div>
    <textarea disabled id="style-content"></textarea>
  </div>
  <script type="text/javascript">
    let css = document.getElementById('css');
    let body = document.getElementById('body');
    let script = document.getElementById('script');

    function updateCSS(styleText) {
      css.appendChild(document.createTextNode(styleText));
    }
    function updateBody(markUpText) {
      body.appendChild(document.createRange().createContextualFragment(markUpText));
    }
    function updateScript(scriptText) {
      script.appendChild(document.createTextNode(scriptText));
    }

    function typeit(textarea, text, onTypeEnd) {
      return new Promise((resolve) => {
        let index = 0;
        let next_letter = function () {
          if (index < text.length) {
            textarea.value += text[index++];
            setTimeout(next_letter, 40);
          } else {
            onTypeEnd(text);
            resolve();
          }
        }
        next_letter();
      });
    }

    async function main() {
      let style = document.getElementById('style-content');
      let markup = document.getElementById('markup-content');

      let snippets = [
        {
          html: ``,
          css: `
/* Let say something.. */
#body {
  background:#ECEFF1;
}
`
        },
        {
          html: `
<!-- Say things here... -->

<h1 id="hello">HelloWorld!</h1>
`,
          css: `
/* Let say something.. */
h1 {
  font-size: 28px;
  color: red;
  font-family: 'Arimo'
}
`
        },
        {
          html: `
<h2>Welcome!</h2>
`,
          css: `
h2 {
  font-size: 22px;
  color: blue;
  font-family: 'Arimo';
}
`
        }];

      for (i = 0; i < snippets.length; ++i) {
        await typeit(markup, snippets[i].html, updateBody);
        await typeit(style, snippets[i].css, updateCSS);
      }
    };
    main();
  </script>
</body>

</html>